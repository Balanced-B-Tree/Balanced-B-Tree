<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://balanced-b-tree.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://balanced-b-tree.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-后端/test" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/%E5%90%8E%E7%AB%AF/test/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T14:39:39.000Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/06/11/%E5%90%8E%E7%AB%AF/test/">post</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/%E5%90%8E%E7%AB%AF/test/" data-id="clirj8bb30000y0szaqji0xka" data-title="post" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/hello-world/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T14:08:24.296Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/06/11/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/hello-world/" data-id="cliri7bmk0000cfszfvib3ng5" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JavaInterview/Gitee搭建静态博客/hexo" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/JavaInterview/Gitee%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/hexo/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T13:01:04.532Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h1 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h1><h2 id="hexo-init-目录X"><a href="#hexo-init-目录X" class="headerlink" title="hexo init 目录X"></a>hexo init 目录X</h2><p>目录X</p>
<h2 id="hexo-g-d-打包并-发布"><a href="#hexo-g-d-打包并-发布" class="headerlink" title="hexo g -d 打包并 发布"></a>hexo g -d 打包并 发布</h2><h1 id="文件目录权限"><a href="#文件目录权限" class="headerlink" title="文件目录权限"></a>文件目录权限</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">helloworld@hellos-MacBook-Pro ~ % npm install -g hexo-cli </span><br><span class="line"></span><br><span class="line">npm ERR! code EACCES</span><br><span class="line">npm ERR! syscall mkdir</span><br><span class="line">npm ERR! path /usr/local/lib/node_modules/hexo-cli</span><br><span class="line">npm ERR! errno -13</span><br><span class="line">npm ERR! Error: EACCES: permission denied, mkdir &#x27;/usr/local/lib/node_modules/hexo-cli&#x27;</span><br><span class="line">npm ERR!  [Error: EACCES: permission denied, mkdir &#x27;/usr/local/lib/node_modules/hexo-cli&#x27;] &#123;</span><br><span class="line">npm ERR!   errno: -13,</span><br><span class="line">npm ERR!   code: &#x27;EACCES&#x27;,</span><br><span class="line">npm ERR!   syscall: &#x27;mkdir&#x27;,</span><br><span class="line">npm ERR!   path: &#x27;/usr/local/lib/node_modules/hexo-cli&#x27;</span><br><span class="line">npm ERR! &#125;</span><br><span class="line">npm ERR! </span><br><span class="line">npm ERR! The operation was rejected by your operating system.</span><br><span class="line">npm ERR! It is likely you do not have the permissions to access this file as the current user</span><br><span class="line">npm ERR! </span><br><span class="line">npm ERR! If you believe this might be a permissions issue, please double-check the</span><br><span class="line">npm ERR! permissions of the file and its containing directories, or try running</span><br><span class="line">npm ERR! the command again as root/Administrator.</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     /Users/helloworld/.npm/_logs/2023-06-11T12_53_29_777Z-debug-0.log</span><br><span class="line">helloworld@hellos-MacBook-Pro ~ % sudo chown -R $flyme ~/.npm     </span><br><span class="line">usage: chown [-fhnvx] [-R [-H | -L | -P]] owner[:group] file ...</span><br><span class="line">       chown [-fhnvx] [-R [-H | -L | -P]] :group file ...</span><br></pre></td></tr></table></figure>



<h2 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/250812475">使用npm命令时报错误Error: EACCES: permission denied，如何解决？ - 知乎 (zhihu.com)</a></p>
<p>按照这个操作，操作完后，再执行 </p>
<blockquote>
<p>npm install -g hexo-cli </p>
</blockquote>
<p>此时又会报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">helloworld@hellos-MacBook-Pro ~ % npm install -g hexo-cli</span><br><span class="line">npm ERR! code EACCES</span><br><span class="line">npm ERR! syscall mkdir</span><br><span class="line">npm ERR! path /Users/helloworld/.npm/_cacache/content-v2/sha512/7f/67</span><br><span class="line">npm ERR! errno -13</span><br><span class="line">npm ERR! </span><br><span class="line">npm ERR! Your cache folder contains root-owned files, due to a bug in</span><br><span class="line">npm ERR! previous versions of npm which has since been addressed.</span><br><span class="line">npm ERR! </span><br><span class="line">npm ERR! To permanently fix this problem, please run:</span><br><span class="line">npm ERR!   sudo chown -R 501:20 &quot;/Users/helloworld/.npm&quot;</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     /Users/helloworld/.npm/_logs/2023-06-11T12_58_45_269Z-debug-0.log</span><br></pre></td></tr></table></figure>

<p>然后按里面的提示，执行下面的指令就可以了</p>
<blockquote>
<p>sudo chown -R 501:20 “&#x2F;Users&#x2F;helloworld&#x2F;.npm”</p>
</blockquote>
<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>Mac用户注意了，要使用管理员权限，首先：“sudo -s”，回车，输入密码，再回车，然后：“npm install -g hexo-cli”，回车，等待下载安装即可</p>
<h1 id="git-push时需要输入电脑密码"><a href="#git-push时需要输入电脑密码" class="headerlink" title="git push时需要输入电脑密码"></a>git push时需要输入电脑密码</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/matrix_laboratory/article/details/75221305">mac配置完ssh依然提示”Enter passphrase for key”解决方法_微岩的博客-CSDN博客</a></p>
<blockquote>
<p>Enter passphrase for key ‘&#x2F;Users&#x2F;helloworld&#x2F;.ssh&#x2F;id_rsa’</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/JavaInterview/Gitee%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/hexo/" data-id="clirje8ze000gyoszbpg996ep" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JavaInterview/框架/Redis/Redis" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/JavaInterview/%E6%A1%86%E6%9E%B6/Redis/Redis/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T10:45:27.574Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/JavaInterview/%E6%A1%86%E6%9E%B6/Redis/Redis/" data-id="clirje8jt0000yoszg4n51wo3" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JavaInterview/数据库/锁" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%94%81/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T10:43:17.584Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="S、X锁"><a href="#S、X锁" class="headerlink" title="S、X锁"></a>S、X锁</h1><p>InnoDB实现了行级锁，可以分为两种类型：共享（S）锁定和排他（X）锁定。</p>
<ul>
<li>共享（S）锁允许持有该锁的事务读取一行，所有又叫读锁</li>
<li>排他（X）锁允许持有该锁的事务更新或删除行，所以又叫写锁。</li>
</ul>
<h2 id="S锁"><a href="#S锁" class="headerlink" title="S锁"></a>S锁</h2><p>其他人可以上S锁，不能上X锁</p>
<p>多个事务并发执行时，如果事务T1在某一行r上持有<strong>共享（S）锁</strong>，那么事务T2的对这行r的锁请求将按以下方式处理：</p>
<ol>
<li>T2对S锁的请求可以立即获得批准。T1和T2都在r上保持了S锁。</li>
<li>T2对X锁的请求不能获取批准。</li>
</ol>
<p>这保证了其他事务可以读A，但在T释放A上的S锁之前不能对A做任何修改。</p>
<h2 id="X锁"><a href="#X锁" class="headerlink" title="X锁"></a>X锁</h2><p>如果事务T1在某一行<code>r</code>上拥有<strong>排他（X）锁</strong>，则事务T2不能获取锁（不论是<strong>S锁</strong>还是<strong>X锁</strong>）</p>
<h1 id="乐观、悲观锁"><a href="#乐观、悲观锁" class="headerlink" title="乐观、悲观锁"></a>乐观、悲观锁</h1><p>乐观锁是乐观的认为每次都不会发生冲突，只会在更新的时候检查要更新的值有没有被别人修改过，因为没有加锁，所以乐观锁又叫<strong>无锁</strong>。在数据库中一般是用MVCC实现乐观锁，在Java中用CAS实现乐观锁。</p>
<p>至于悲观锁就是悲观的认为每次都会发生冲突，所以每次修改都需要加锁。</p>
<h1 id="行锁"><a href="#行锁" class="headerlink" title="行锁"></a>行锁</h1><p>行锁是MySQL中粒度最细的一种锁，每次只锁住要操作的那一行。实现复杂，支持的并发度高。只有InnoDB支持行锁。</p>
<p>行锁也分为共享（S）锁和排他（X）锁。行锁是对索引的锁定。例如<code>SELECT c1 FROM t WHERE c1 = 10 FOR UPDATE</code>，防止任何其他事务插入，更新或删除t.c1值为10的行。行锁始终锁定索引，对于没有创建索引的表，InnoDB创建一个隐藏的聚簇索引并将该索引用于行锁。</p>
<p>行锁的特点是实现复杂，并发度高。加锁慢，开销大。会出现死锁</p>
<h1 id="意向锁（Intention-Locks）"><a href="#意向锁（Intention-Locks）" class="headerlink" title="意向锁（Intention Locks）"></a>意向锁（Intention Locks）</h1><p>InnoDB支持多种粒度锁定，允许行锁和表锁并存。为了使在多个粒度级别上的锁定变得切实可行，InnoDB实现了意图锁。意向锁是表级锁，表示事务稍后对表中的行需要上哪种类型的锁（共享锁或排他锁）。有两种类型的意图锁：</p>
<ul>
<li>意向共享锁（IS）表示事务打算给数据行加行共享锁，事务在给一个数据行加共享锁前必须先取得该表的 IS 锁。</li>
<li>意向排他锁（IX）表示事务打算给数据行加行排他锁，事务在给一个数据行加排他锁前必须先取得该表的 IX 锁。</li>
</ul>
<blockquote>
<p>Intention locks do not block anything except full table requests (for example, LOCK TABLES … WRITE). The main purpose of intention locks is to show that someone is locking a row, or going to lock a row in the table.<br><strong>意向锁</strong>不会阻止任何其他请求，除了（锁定）全表请求（例如<code>LOCK TABLES ... WRITE</code>）外。<strong>意向锁</strong>定的主要目的是：声明已经有事务<strong>正在锁定</strong>表中的行，或者<strong>即将锁定</strong>表中的行。</p>
</blockquote>
<p>声明表中的行正在被锁定或者即将被锁定，用于事务A想给整个表上 X锁时，判断这个 X锁能不能上。</p>
<h1 id="间隙锁（Gap-Locks）"><a href="#间隙锁（Gap-Locks）" class="headerlink" title="间隙锁（Gap Locks）"></a>间隙锁（Gap Locks）</h1><p>间隙锁锁定的是索引记录之间的间隙，或者在第一个或最后一个索引记录之前的间隙。例如<code>SELECT c1 FROM t WHERE c1 BETWEEN 10 and 20 FOR UPDATE</code>，可以防止其他事务将t.c1为15的记录插入表中，因为这两个值之间的间隙是被锁定的。</p>
<p>间隙可能跨越单个索引值，多个索引值，甚至为空。</p>
<p>间隙锁的唯一目的是<strong>仅防止其他事务在间隙中插入数据</strong>。间隙锁可以共存。一个事务执行的间隙锁，不会阻止另一事务对相同的间隙进行间隙锁定。</p>
<h1 id="Next-Key-Locks"><a href="#Next-Key-Locks" class="headerlink" title="Next-Key Locks"></a>Next-Key Locks</h1><p>Next-Key Locks是索引记录上的<strong>行锁</strong>和<strong>间隙锁</strong>的组合。如果一个session在索引中的记录R上具有共享或排他锁，则另一session不能按照索引顺序在R之前的间隙中插入新的索引记录。</p>
<p>默认情况下，InnoDB设置的事务隔离级别是REPEATABLE READ。在这种情况下，InnoDB使用Next-Key Locks进行搜索和索引扫描，这可以防止幻读（虚读）。关于MySQL隔离级别相关的问题，</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%94%81/" data-id="clirje8o5000cyosz13zmdpub" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JavaInterview/数据库/索引" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%B4%A2%E5%BC%95/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T10:43:17.583Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010922732/article/details/82994253?utm_source=app&app_version=4.15.2">MySQL存储引擎MyISAM和InnoDB底层索引结构_@子敬的博客-CSDN博客_myisam索引结构</a></p>
<p>不要过度建索引，只保持所需的索引。每个额外的索引都要占用额外的磁盘空间，并降低写操作的 性能。 在修改表的内容时，索引必须进行更新，有时可能需要重构，因此，索引越多，所花的时间越长。</p>
<p>MySQL 只对一下操作符才使用索引： &lt;,&lt;&#x3D;,&#x3D;,&gt;,&gt;&#x3D;,between,in 以及某些时候的 like(不以通配符%或_开头的情形)。</p>
<h1 id="聚簇、非聚簇索引"><a href="#聚簇、非聚簇索引" class="headerlink" title="聚簇、非聚簇索引"></a>聚簇、非聚簇索引</h1><p>InnoDB中主键所建立的是聚簇索引，而唯一索引、普通索引、前缀索引等都是二级索引。</p>
<p><img src="/%E7%B4%A2%E5%BC%95.assets/image-20210730210627956.png" alt="image-20210730210627956"></p>
<p>二级索引：指的是非主键索引</p>
<p><img src="/%E7%B4%A2%E5%BC%95.assets/image-20210730210700213.png" alt="image-20210730210700213"></p>
<h2 id="聚簇索引"><a href="#聚簇索引" class="headerlink" title="聚簇索引"></a>聚簇索引</h2><p>innoDB的key值，最好用自增，可以避免数据的插入。因为在InnoDB中，数据是顺序存储的，就像数组一样，插入数据时，需要像数组一样修改文件。</p>
<ol>
<li>能提升IO密集型应用性能（范围查询）：因为，聚簇索引中，数据是顺序存储，能够利用局部性原理。在非聚簇索引中，数据不是顺序存储，无法使用局部性原理</li>
<li>减少一次访盘，增加查询速度</li>
<li>row的移动，不影响二级索引：二级索引中，叶子结点存储的是 从键-主键的映射，在根据从键找到主键后，需要拿着主键去“主键索引”中再进行一次查询。（select * 会导致 查询二级索引）</li>
</ol>
<h2 id="B-与B的区别"><a href="#B-与B的区别" class="headerlink" title="B+与B的区别"></a>B+与B的区别</h2><ol>
<li>在B树中，你可以将键和值存放在内部节点和叶子节点，但在B+树中，内部节点都是键，没有值。叶子节点同时存放键和值</li>
<li>B+树的叶子节点有一条链相连，而B+树的叶子节点各自独立。</li>
</ol>
<p>使用B+树的好处：</p>
<ol>
<li>从内存块上来说：一个内存块能存放更多的key，有利于减少磁盘与内存块的交互</li>
<li>从范围查询上来说</li>
</ol>
<p>数据库的数据读取都是需要进行代价巨大的磁盘IO操作，因此，更快地缩小范围和更少的读取次数是数据库需要关注的重点。</p>
<h1 id="索引分类"><a href="#索引分类" class="headerlink" title="索引分类"></a>索引分类</h1><p>索引我们分为四类来讲<strong>单列索引</strong>(普通索引，唯一索引，主键索引)、<strong>组合索引</strong>、<strong>全文索引</strong>、<strong>空间索引</strong>、</p>
<ol>
<li><p>单列索引：一个索引只包含单个列，但一个表中可以有多个单列索引。 这里不要搞混淆了。</p>
<ol>
<li>普通索引：MySQL中基本索引类型，没有什么限制，允许在定义索引的列中插入重复值和空值，纯粹为了查询数据更快一点。</li>
<li>唯一索引：索引列中的值必须是唯一的，但是允许为空值，</li>
<li>主键索引（也称聚簇索引）：是一种特殊的唯一索引，不允许有空值。（主键约束，就是一个主键索引）</li>
</ol>
</li>
<li><p>组合索引：在表中的多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用，使用组合索引时遵循最左前缀集合。例如，这里由id、name和age3个字段构成的索引，索引行中就按id&#x2F;name&#x2F;age的顺序存放，索引可以索引下面字段组合(id，name，age)、(id，name)或者(id)。如果要查询的字段不构成索引最左面的前缀，那么就不会是用索引，比如，age或者（name，age）组合就不会使用索引查询</p>
</li>
<li><p>全文索引：全文索引，只有在MyISAM引擎上才能使用，只能在CHAR,VARCHAR,TEXT类型字段上使用全文索引，介绍了要求，说说什么是全文索引，就是在一堆文字中，通过其中的某个关键字等，就能找到该字段所属的记录行，比如有”你是个大煞笔，二货 …” 通过大煞笔，可能就可以找到该条记录。这里说的是可能，因为全文索引的使用涉及了很多细节，我们只需要知道这个大概意思。</p>
</li>
<li><p>空间索引：空间索引是对空间数据类型的字段建立的索引，MySQL中的空间数据类型有四种，GEOMETRY、POINT、LINESTRING、POLYGON。在创建空间索引时，使用SPATIAL关键字。要求，引擎为MyISAM，创建空间索引的列，必须将其声明为NOT NULL。可能跟游戏开发有关。</p>
</li>
</ol>
<h2 id="覆盖索引"><a href="#覆盖索引" class="headerlink" title="覆盖索引"></a>覆盖索引</h2><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903967365791752">MySQL 覆盖索引详解 - 掘金 (juejin.cn)</a></p>
<p>覆盖索引，即一次查找，就能找到想要的数据，无需回表。</p>
<p>对于使用了覆盖索引的查询，在查询前面使用<code>explain</code>，输出的extra列会显示为<code>using index</code>。</p>
<p>比如<code>user_like</code> 用户点赞表，组合索引为<code>(user_id, blog_id)</code>，<code>user_id</code>和<code>blog_id</code>都不为<code>null</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> blog_id <span class="keyword">from</span> user_like <span class="keyword">where</span> user_id <span class="operator">=</span> <span class="number">13</span>;</span><br></pre></td></tr></table></figure>



<h3 id="回表"><a href="#回表" class="headerlink" title="回表"></a>回表</h3><p><strong>所谓回表查询</strong>，需要<strong>扫描两次索引 B+ 树</strong>，所以很显然它的性能较扫一遍索引树更低。</p>
<p>假设表tbl有a,b,c三个字段，其中a是主键，b上建了索引，然后编写sql语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl <span class="keyword">WHERE</span> a<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>这样不会产生回表，因为所有的数据在a的索引树中均能找到</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl <span class="keyword">WHERE</span> b<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>这样就会产生回表，因为通过 b的索引，只能找到对应的主键 a。但是，我们要找到是所有的数据 <code>a,b,c</code>，因此需要再去主键索引 a那里寻找</p>
<h2 id="联合索引"><a href="#联合索引" class="headerlink" title="联合索引"></a>联合索引</h2><p>也称为组合索引，(column1, column2, column3…..)</p>
<h2 id="前缀索引？"><a href="#前缀索引？" class="headerlink" title="前缀索引？"></a>前缀索引？</h2><p>有时需要在很长的字符列上创建索引，这会造成索引特别大且慢。使用前缀索引可以避免这个问题。</p>
<p>前缀索引是指对文本或者字符串的前几个字符建立索引，这样索引的长度更短，查询速度更快。</p>
<p>创建前缀索引的关键在于选择足够长的前缀以<strong>保证较高的索引选择性</strong>。索引选择性越高查询效率就越高，因为选择性高的索引可以让MySQL在查找时过滤掉更多的数据行。</p>
<p>建立前缀索引的方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> email列创建前缀索引</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> KEY(column_name(prefix_length));</span><br></pre></td></tr></table></figure>









<h1 id="建立索引的原则"><a href="#建立索引的原则" class="headerlink" title="建立索引的原则"></a>建立索引的原则</h1><ul>
<li>索引列的<strong>区分度越高</strong>，索引的效果越好。比如使用性别这种区分度很低的列作为索引，效果就会很差。</li>
<li>尽量使用<strong>短索引</strong>，对于较长的字符串进行索引时应该指定一个较短的前缀长度，因为较小的索引涉及到的磁盘I&#x2F;O较少，查询速度更快。</li>
<li>索引不是越多越好，每个索引都需要额外的物理空间，维护也需要花费时间。</li>
<li>利用<strong>最左前缀原则</strong>。</li>
</ul>
<p><img src="/%E7%B4%A2%E5%BC%95.assets/image-20210730212324231.png" alt="image-20210730212324231"></p>
<h1 id="建立索引的情况"><a href="#建立索引的情况" class="headerlink" title="建立索引的情况"></a>建立索引的情况</h1><ol>
<li><p><strong>主键</strong>：主键自动建立唯一索引P</p>
</li>
<li><p><strong>频繁使用的</strong>：频繁作为查询条件的字段应该创建索引</p>
</li>
<li><p><strong>外键</strong>：查询中与其它表关联的字段，外键关系建立索引</p>
</li>
<li><p><strong>组合索引</strong>：单键&#x2F;组合索引的选择问题，组合索引性价比更高</p>
</li>
<li><p><strong>order by</strong>：查询中排序的字段（被order by的），排序字段若通过索引去访问将大大提高排序速度</p>
</li>
<li><p><strong>group by</strong>：查询中统计或者分组字段（group by）</p>
</li>
</ol>
<p>不用建立索引的：</p>
<ol>
<li>表记录太少</li>
<li>经常增删改的表或者字段</li>
<li>Where条件里用不到的字段不创建索引</li>
<li>过滤性不好的不适合建索引</li>
</ol>
<h1 id="索引失效的情况"><a href="#索引失效的情况" class="headerlink" title="索引失效的情况"></a>索引失效的情况</h1><ol>
<li><p>查询条件包含or，可能导致索引失效</p>
</li>
<li><p>如何字段类型是字符串，where时一定用引号括起来，否则索引失效</p>
</li>
<li><p>like通配符可能导致索引失效。</p>
</li>
<li><p>联合索引，查询时的条件列不是联合索引中的第一个列，索引失效。</p>
</li>
<li><p>在索引列上使用mysql的内置函数，索引失效。</p>
</li>
<li><p>对索引列运算（如，+、-、*、&#x2F;），索引失效。</p>
</li>
<li><p>索引字段上使用（！&#x3D; 或者 &lt; &gt;，not in）时，可能会导致索引失效。</p>
</li>
<li><p>索引字段上使用is null， is not null，可能导致索引失效。</p>
</li>
<li><p>左连接查询或者右连接查询查询关联的字段编码格式不一样，可能导致索引失效。</p>
</li>
<li><p>mysql估计使用全表扫描要比使用索引快,则不使用索引。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%B4%A2%E5%BC%95/" data-id="clirje8o3000ayosz027k9ewr" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JavaInterview/数据库/进度" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%BF%9B%E5%BA%A6/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T10:43:17.583Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="12"><a href="#12" class="headerlink" title="12"></a>12</h1><h2 id="第四周"><a href="#第四周" class="headerlink" title="第四周"></a>第四周</h2><h3 id="12-25周六"><a href="#12-25周六" class="headerlink" title="12.25周六"></a>12.25周六</h3><ol>
<li>研究了MVCC，如何实现可重复读，以及各种锁</li>
</ol>
<p>redo、undo没咋看</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%BF%9B%E5%BA%A6/" data-id="clirje8o4000byoszdruq4znt" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JavaInterview/数据库/日志" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%97%A5%E5%BF%97/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T10:43:17.569Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<p><a target="_blank" rel="noopener" href="https://javaguide.cn/database/mysql/mysql-logs.html#%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4">MySQL三大日志(binlog、redo log和undo log)详解 | JavaGuide</a></p>
<h1 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Baisitao_/article/details/104723795">面试官：MySQL事务是怎么实现的_Sicimike的博客-CSDN博客_mysql的事务是怎么实现的</a></p>
<p><code>undo log</code>和<code>redo log</code>并不是直接写到磁盘上的，而是先写入<code>log buffer</code>。再等待合适的时机同步到<code>OS buffer</code>，再由操作系统决定何时刷到磁盘，具体过程如下：</p>
<p><img src="/%E6%97%A5%E5%BF%97.assets/20200425210059474.jpg" alt="在这里插入图片描述"></p>
<p>既然undo log和redo log都是从log buffer 到 OS buffer，再到磁盘。所以中途还是有可能因为断电&#x2F;硬件故障等原因导致日志丢失。为此MySQL提供了三种持久化方式，innodb_flush_log_at_trx_commit 这个参数主要控制InnoDB将log buffer中的数据写入OS buffer，并刷到磁盘的时间点，取值分别为0，1，2，默认是1。这三个值的意思分别如下</p>
<p><img src="/%E6%97%A5%E5%BF%97.assets/20200308212726564.jpg" alt="log file刷盘策略"></p>
<p>redo、undo log都是 innoDb的</p>
<h2 id="redo-log"><a href="#redo-log" class="headerlink" title="redo log"></a>redo log</h2><p><code>redo log</code>是innodb引擎级别，用来记录innodb存储引擎的事务日志，不管事务是否提交都会记录下来（只记录修改），用于数据恢复。</p>
<p>当数据库发生故障，innoDB存储引擎会使用<code>redo log</code>恢复到发生故障前的时刻，以此来保证数据的完整性。将参数<code>innodb_flush_log_at_tx_commit</code>设置为1，那么在执行commit时会将<code>redo log</code>同步写到磁盘。</p>
<h2 id="undo-log"><a href="#undo-log" class="headerlink" title="undo log"></a>undo log</h2><p>[MySQL 的undo什么时候写到硬盘？ - 知乎 (zhihu.com)](<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/456507056#:~:text=1%3A">https://www.zhihu.com/question/456507056#:~:text=1%3A</a> undo log有没有像redo一样的buffer？,%3D%3D%3D%3D 有undo buffer的，写undo log前，会先放在内存buffer中。)</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Weixiaohuai/article/details/117867353">MySQL回滚日志（undo log）总结_每天都要进步一点点的博客-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/362208179">事务回滚 原子性 undo日志 回滚段 什么时候删除undo日志 - 知乎 (zhihu.com)</a></p>
<p><img src="/%E6%97%A5%E5%BF%97.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dlaXhpYW9odWFp,size_16,color_FFFFFF,t_70-20230605224641896.png" alt="img"></p>
<p>除了记录<code>redo log</code>外，当进行数据修改时还会记录<code>undo log</code>，<code>undo log</code>用于数据的撤回操作，它保留了记录修改前的内容。通过<code>undo log</code>可以实现事务回滚，并且可以根据<code>undo log</code>回溯到某个特定的版本的数据，<strong>实现MVCC</strong>。</p>
<p>undo log 也是 innodb的。</p>
<p>用处：</p>
<ol>
<li>事务回滚。事务回滚，实现了<code>原子性</code>。事务回滚有两种场景<ol>
<li>MySQL服务器宕机重启。宕机时，一个事务执行了一半，updataA落表了，但是 updateB没有落表。此时 MySQL通过 redo log发现“该事务没有成功”，于是通过 undo log，将数据回滚</li>
<li>程序异常导致的回滚。</li>
</ol>
</li>
<li>实现 MVCC</li>
</ol>
<p>Q：事务中断时，undo log没有刷入到磁盘，怎么办？</p>
<p>A：</p>
<h2 id="binlog"><a href="#binlog" class="headerlink" title="binlog"></a>binlog</h2><p><code>redo log</code> 它是物理日志，记录内容是“在某个数据页上做了什么修改”，属于 <code>InnoDB</code> 存储引擎。</p>
<p>而 <code>binlog</code> 是逻辑日志，记录内容是语句的原始逻辑，类似于“给 ID&#x3D;2 这一行的 c 字段加 1”，属于<code>MySQL Server</code> 层。是MySQL数据库级别的文件，记录对MySQL数据库执行修改的所有操作，不会记录select和show语句，主要用于恢复数据库和同步数据库。&#x3D;&#x3D;<code>binlog</code>只有在提交事务时才写入。&#x3D;&#x3D;</p>
<p>区别：</p>
<ol>
<li><code>bin log</code>会记录所有日志记录，包括InnoDB、MyISAM等存储引擎的日志；<code>redo log</code>只记录innoDB自身的事务日志。</li>
<li><code>bin log</code>只在事务提交前写入到磁盘，一个事务只写一次；而在事务进行过程，会有<code>redo log</code>不断写入磁盘。</li>
<li><code>bin log</code>是逻辑日志，记录的是SQL语句的原始逻辑；<code>redo log</code>是物理日志，记录的是在某个数据页上做了什么修改。</li>
</ol>
<p>不管用什么存储引擎，只要发生了表数据更新，都会产生 <code>binlog</code> 日志。</p>
<p>那 <code>binlog</code> 到底是用来干嘛的？</p>
<p>可以说<code>MySQL</code>数据库的<strong>数据备份、主备、主主、主从</strong>都离不开<code>binlog</code>，需要依靠<code>binlog</code>来同步数据，保证数据一致性。</p>
<h1 id="两阶段提交"><a href="#两阶段提交" class="headerlink" title="两阶段提交"></a>两阶段提交</h1><p><code>redo log</code>与<code>binlog</code>的写入时机不一样。以基本的事务为单位，<code>redo log</code>在事务执行过程中可以不断写入，而<code>binlog</code>只有在提交事务时才写入。</p>
<p>那么，<code>redo log</code>与<code>binlog</code>两份日志之间的逻辑不一致，会出现什么问题？</p>
<h2 id="不一致举例"><a href="#不一致举例" class="headerlink" title="不一致举例"></a>不一致举例</h2><p>以<code>update</code>语句为例，假设<code>id=2</code>的记录，字段<code>c</code>值是<code>0</code>，把字段<code>c</code>值更新成<code>1</code>，<code>SQL</code>语句为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> T <span class="keyword">set</span> c<span class="operator">=</span><span class="number">1</span> <span class="keyword">where</span> id<span class="operator">=</span><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><img src="/%E6%97%A5%E5%BF%97.assets/02-20220305234828662.png" alt="img"></p>
<p>由于<code>binlog</code>没写完就异常，这时候<code>binlog</code>里面没有对应的修改记录。因此，之后用<code>binlog</code>日志恢复数据时，就会少这一次更新，恢复出来的这一行<code>c</code>值是<code>0</code>，而原库因为<code>redo log</code>日志恢复，这一行<code>c</code>值是<code>1</code>，最终数据不一致。</p>
<h2 id="两阶段提交-1"><a href="#两阶段提交-1" class="headerlink" title="两阶段提交"></a>两阶段提交</h2><p>为了解决两份日志之间的逻辑一致问题，<code>InnoDB</code>存储引擎使用<strong>两阶段提交</strong>方案。</p>
<p>原理很简单，将<code>redo log</code>的写入拆成了两个步骤<code>prepare</code>和<code>commit</code>，这就是<strong>两阶段提交</strong>。</p>
<p><img src="/%E6%97%A5%E5%BF%97.assets/04-20220305234956774.png" alt="img"></p>
<p>若binlog出现异常，<code>MySQL</code>根据<code>redo log</code>日志恢复数据时，发现<code>redo log</code>还处于<code>prepare</code>阶段，并且没有对应的<code>binlog</code>日志，就会回滚该事务。</p>
<p>若binlog没有异常，但是 <code>redo log</code> commit 异常。此时并不会回滚事务，虽然<code>redo log</code>是处于<code>prepare</code>阶段，但是能通过事务<code>id</code>找到对应的<code>binlog</code>日志，所以<code>MySQL</code>认为是完整的，就会提交事务恢复数据。</p>
<h1 id="Master的宕机恢复"><a href="#Master的宕机恢复" class="headerlink" title="Master的宕机恢复"></a>Master的宕机恢复</h1><p>[MySQL InnoDB 恢复(recovery)详细流程 - VicLW - 博客园 (cnblogs.com)](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/VicLiu/p/12606597.html#:~:text=1">https://www.cnblogs.com/VicLiu/p/12606597.html#:~:text=1</a> 从ib_logfile1的指定位置开始读取redo log，每次读取4 * page_size的大小，这里我们默认页面大小为16K，所以每次读取64K的redo log到缓存中，redo log每条记录,(block)的大小为512字节 2 读取到缓存中的redo log通过解析、验证等一系列过程后，把redo log的内容部分保存到用于恢复的缓存recv_sys-&gt;buf，保存到恢复缓存中的每条信息主要包含两部分： (space%2Coffset)组成的位置信息和具体redo log的内容，我们称之为body 更多项目)</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/346970015">基于Redo Log和Undo Log的MySQL崩溃恢复流程 - 知乎 (zhihu.com)</a></p>
<p><img src="/%E6%97%A5%E5%BF%97.assets/v2-9a0f80a6e14e7c15ec01d66ed16e086d_1440w.jpg" alt="img"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%97%A5%E5%BF%97/" data-id="clirje8o20009yoszgjgs5l7a" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JavaInterview/数据库/数据库的基本数据类型" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T10:43:17.561Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h1 id="int"><a href="#int" class="headerlink" title="int"></a>int</h1><h2 id="int-number"><a href="#int-number" class="headerlink" title="int(number)"></a>int(number)</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenmingjun/p/10556206.html">【MySQL】MySQL 中的 int(11) 到底代表什么意思？ - 黑泽君 - 博客园 (cnblogs.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22771739/article/details/85833710">MySQL bigint(20)是什么意思_诚o的博客-CSDN博客_bigint(20)</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">类型		占用字节</span><br><span class="line">tinyint			1</span><br><span class="line">smallint		2</span><br><span class="line">mediumint		3</span><br><span class="line">int				4</span><br><span class="line">bigint			8</span><br></pre></td></tr></table></figure>





<blockquote>
<p>tinyint(M), M默认为4;<br>SMALLINT(M), M默认为6;<br>MEDIUMINT(M), M默认为9;<br>INT(M),M默认为11;<br>BIGINT(M),M默认为20. M表示最大显示宽度, 建表若设置了zerofill(0填充),<br>会在数字前面补充0.</p>
</blockquote>
<h1 id="Java类型与-数据库类型的对应关系"><a href="#Java类型与-数据库类型的对应关系" class="headerlink" title="Java类型与 数据库类型的对应关系"></a>Java类型与 数据库类型的对应关系</h1><table>
<thead>
<tr>
<th>java类</th>
<th></th>
<th>mysql数据库</th>
</tr>
</thead>
<tbody><tr>
<td>java.lang.Byte</td>
<td>byte</td>
<td>TINYINT</td>
</tr>
</tbody></table>
<p>java.lang.Short	short	SMALLINT<br>java.lang.Integer	integer	INGEGER<br>java.lang.Long	long	BIGINT<br>java.lang.Float	float	FLOAT<br>java.lang.Double	double	DOUBLE<br>java.lang.BigDecimal	big_decimal	NUMERIC<br>java.lang.Boolean	boolean	BIT<br>java.lang.String	string	VARCHAR<br>java.lang.Boolean	yes_no	CHAR(1)(‘Y’或’N’)<br>java.lang.Boolean	true_false	CHAR(1)(‘Y’或’N’)<br>java.uitl.Date &#x2F; java.sql.Date	date	DATE<br>java.sql.Time	time	TIME<br>java.sql.Timestamp	timestamp	TIMESTAMP<br>java.uitl.Calendar	celendar	TIMESTAMP<br>java.uitl.Calendar	calendar	TIMESTAMP<br>java.io.Serializable	serializable	VARBINARY&#x2F;BLOB<br>java.sql.Clob	clob	CLOB<br>java.sql.Blob	blob	BLOB<br>java.lang.Class	class	VARCHAR<br>java.uitl.Locale	locale	VARCHAR<br>java.uitl.TimeZone	timezone	VARCHAR<br>java.uitl.Currency	currency	VARCHAR</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39746740/article/details/82053908">Java中Long型数据类型对应MySQL数据库中哪种类型？_北辰一刀的博客-CSDN博客_数据库long类型</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" data-id="clirje8o00007yosz7trlf8xv" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JavaInterview/数据库/基本概念" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" class="article-date">
  <time class="dt-published" datetime="2023-06-11T10:43:17.561Z" itemprop="datePublished">2023-06-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h1 id="回表"><a href="#回表" class="headerlink" title="回表"></a>回表</h1><p>什么是回表？</p>
<p>简单来说就是数据库根据索引找到了指定的记录所在行后，还需要根据rowid再次到数据块里取数据的操作。</p>
<p>比如这样的执行计划：</p>
<ol>
<li>先索引扫描，得到rowid</li>
<li>再通过rowid去取索引中未能提供的数据，即为回表。</li>
</ol>
<p>“回表”一般就是指执行计划里显示的“<strong>TABLE ACCESS BY INDEX ROWID</strong>”。</p>
<p>怎么避免回表？</p>
<p>将需要的字段放在索引中去。查询的时候就能避免回表。但是不要刻意去避免回表，那样代价太了。也不是将所有的字段都放在所有中。</p>
<h1 id="覆盖索引"><a href="#覆盖索引" class="headerlink" title="覆盖索引"></a>覆盖索引</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36551991/article/details/106594768">覆盖索引是什么？一篇文章告诉你_way_more的博客-CSDN博客_覆盖索引是什么</a></p>
<p>覆盖索引是select的数据列只用从索引中就能够取得，不必读取数据行，换句话说查询列要被所建的索引覆盖。</p>
<p>与“回表”一起理解</p>
<h1 id="分区表"><a href="#分区表" class="headerlink" title="分区表"></a>分区表</h1><p>分区表是一个独立的逻辑表，但是底层由多个物理子表组成。</p>
<p>当查询条件的数据分布在某一个分区的时候，查询引擎只会去某一个分区查询，而不是遍历整个表。在管理层面，如果需要删除某一个分区的数据，只需要删除对应的分区即可。</p>
<h2 id="按照范围分区"><a href="#按照范围分区" class="headerlink" title="按照范围分区"></a>按照范围分区</h2><h2 id="list分区"><a href="#list分区" class="headerlink" title="list分区"></a>list分区</h2><h2 id="hash分区"><a href="#hash分区" class="headerlink" title="hash分区"></a>hash分区</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://balanced-b-tree.github.io/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" data-id="clirje8o10008yoszeqhveb3m" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/06/11/%E5%90%8E%E7%AB%AF/test/">post</a>
          </li>
        
          <li>
            <a href="/2023/06/11/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2023/06/11/JavaInterview/Gitee%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/hexo/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/06/11/JavaInterview/%E6%A1%86%E6%9E%B6/Redis/Redis/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/06/11/JavaInterview/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%94%81/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>